RewriteEngine On

# ✅ Always redirect to HTTPS
RewriteCond %{HTTPS} off
RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# ✅ Remove ?i=1 from URLs (InfinityFree tracking query)
RewriteCond %{QUERY_STRING} (^|&)i=1(&|$)
RewriteRule ^(.*)$ /$1? [R=301,L]

# ✅ Redirect www to non-www
RewriteCond %{HTTP_HOST} ^www\.elitenet\.infinityfreeapp\.com [NC]
RewriteRule ^(.*)$ https://elitenet.infinityfreeapp.com/$1 [L,R=301]

# ✅ Redirect IP address to domain
RewriteCond %{HTTP_HOST} ^185\.27\.134\.144$
RewriteRule ^(.*)$ https://elitenet.infinityfreeapp.com/$1 [L,R=301]
